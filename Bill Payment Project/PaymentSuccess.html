<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Done Successfully</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.16/jspdf.plugin.autotable.min.js"></script>
    <style>
        body {
            background-color: #f4f4f4;
            text-align: center;
            margin: 50px;
            font-family: Arial, sans-serif;
        }

        h4 {
            background-color: #add8e6;
            padding: 10px;
            margin-bottom: 20px;
        }

        h5 {
            background-color: #4682b4;
            color: #fff;
            padding: 10px;
            margin-bottom: 20px;
        }

        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 12px;
            text-align: left;
        }

        .button-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        .button-container button {
            margin: 0 10px;
            padding: 10px 20px;
            font-size: 16px;
        }

        .btn-primary {
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        .btn-info {
            background-color: #17a2b8;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover, .btn-info:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h4>Payment Done Successfully</h4>

    <h5>Team 6 Online Payment - Transaction Details</h5>

    <table id="paymentTable">
        <thead>
            <tr>
                <th>Transaction Number</th>
                <th>Receipt Number</th>
                <th>Transaction Date</th>
                <th>Transaction Type</th>
                <th>Payment Type</th>
                <th>Payment Gateway</th>
                <th>Section</th>
                <th>Consumer Number</th>
                <th>Paid Amount</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="transactionNumber"></td>
                <td id="receiptNumber"></td>
                <td id="transactionDate"></td>
                <td>DC</td>
                <td>Registered Type</td>
                <td>EFG Payment Gateway</td>
                <td>Team 6</td>
                <td id="consumerNumber1"></td>
                <td id="paidAmount"></td>
            </tr>
        </tbody>
    </table>

    <div class="button-container">
        <button onclick="window.location.href='Navbar.html'" class="btn btn-primary">Back to Home</button>
        <button onclick="window.print()" class="btn btn-info">Print</button>
    </div>

    <script>
        function generateRandomNumber() {
            return Math.floor(100000 + Math.random() * 900000); 
        }

        function getCurrentDateTime() {
            const now = new Date();
            return now.toLocaleString(); 
        }

        var paymentAmount = sessionStorage.getItem('totalamtpayable');
        document.getElementById('paidAmount').innerText = paymentAmount;

        var consumerNumber = sessionStorage.getItem('connum');
        document.getElementById('consumerNumber1').innerText = consumerNumber;

        window.onload = function () {
            document.getElementById('transactionNumber').innerText = generateRandomNumber();
            document.getElementById('receiptNumber').innerText = generateRandomNumber();
            document.getElementById('transactionDate').innerText = getCurrentDateTime();
        };

        var doc = new jsPDF();
        doc.autoTable({ html: '#paymentTable' });
        doc.save('receipt.pdf');
    </script>
</body>
</html>